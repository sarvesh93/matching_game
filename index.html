<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
	img {position:absolute;width:50px; height:50px; }
	div {position:absolute; width:500px; height:500px; }
	#rightSide { left: 500px; border-left: 1px solid black ;}
	</style>
   <title></title>
    
  </head>
  
  <body id="thebody" onload="generateFaces()">
  		<h1>Matching Game</h1>
		<p>Click on the extra smiling face on the left</p>
		
		<div id="leftSide"></div> 
		<div id="rightSide"></div>
		
		<script>
		
		
		var numberOfFaces=5;
		var theLeftSide = document.getElementById("leftSide");
		var theRightSide = document.getElementById("rightSide");
		var clone;
		
		function generateFaces(){
				 for(var i=1;i<numberOfFaces+1;i++)
				 {
				 
				 
				 var new_img=document.createElement("img");
				 new_img.src="http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png";
				 new_img.style.left=Math.floor(Math.random()*400) + "px";
				 new_img.style.top=Math.floor((Math.random()*400)+100)+"px";
				 theLeftSide.appendChild(new_img);
				 
				 if(i==numberOfFaces){
				 new_img.setAttribute('id', "lastchild");
				 
				 }
				 }
				 clone = theLeftSide.cloneNode(true);
				 clone.removeChild(clone.lastChild);
				 theRightSide.appendChild(clone);
		         document.getElementById("lastchild").addEventListener("click", next_level);
				 thebody.addEventListener("click", gameover);
			}
	 
		
		 
		 function next_level(){
		  event.stopPropagation();
		  while(theLeftSide.firstChild)
		  {
		  theLeftSide.removeChild(theLeftSide.firstChild);
		  }
		  while(theRightSide.firstChild)
		  {
		  theRightSide.removeChild(theRightSide.firstChild);
		  }
		    numberOfFaces += 5;
			generateFaces();
			}
			
		 function gameover(){
		  event.stopPropagation();
		  alert("Game Over!");
		  thebody.removeEventListener("click",gameover);
		  theLeftSide.lastChild.removeEventListener("click",next_level);
		  }
		</script>
  </body>
</html>